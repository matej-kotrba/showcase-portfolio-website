<script lang="ts">
  import gsap from "gsap";
  import { onMount } from "svelte";

  let pathLine: SVGPathElement | null = null;

  let pathName: SVGPathElement | null = null;

  function animate() {
    if (!pathLine || !pathName) return;
    const length = pathLine.getTotalLength();
    pathLine.style.strokeDasharray = length + " " + length;
    gsap.fromTo(
      pathLine,
      {
        strokeDashoffset: length,
      },
      {
        strokeDashoffset: 0,
        delay: 0.5,
        duration: 3,
        ease: "power3.out",
      }
    );

    const lengthName = pathName.getTotalLength();
    pathName.style.strokeDasharray = lengthName + " " + lengthName;
    gsap.fromTo(
      pathName,
      {
        strokeDashoffset: lengthName,
      },
      {
        strokeDashoffset: 0,
        delay: 0.5,
        duration: 60,
        ease: "power3.out",
      }
    );
  }

  onMount(() => {
    animate();
  });
</script>

<div class="grid__container">
  <svg viewBox="0 0 886 292" fill="none" preserveAspectRatio="xMaxYMid meet">
    <path
      class="resetted_path"
      bind:this={pathLine}
      d="M1 2.00002C80.5 45.8334 287.7 254.9 210.5 112.5C133.3 -29.9 706.833 142.333 884 290"
      stroke="white"
      stroke-width="4"
    />
  </svg>
  <svg viewBox="0 0 886 292" fill="none" preserveAspectRatio="xMaxYMid meet">
    <path
      class="resetted_path"
      bind:this={pathLine}
      d="M1 2.00002C80.5 45.8334 287.7 254.9 210.5 112.5C133.3 -29.9 706.833 142.333 884 290"
      stroke="white"
      stroke-width="4"
    />
  </svg>
  <div class="w-full relative">
    <svg
      viewBox="0 0 300 139"
      preserveAspectRatio="xMaxYMid meet"
      fill="none"
      class="w-[30%] mx-auto translate-y-[70%] translate-x-[25%]"
    >
      <path
        class="resetted_path"
        bind:this={pathName}
        d="M38.7872 11.8779C39.705 10.9828 40.6378 10.6999 41.5856 11.029L43.5151 11.6992C43.8874 11.8285 44.162 12.0756 44.3387 12.4404C44.5155 12.8053 44.5392 13.1739 44.4098 13.5462L33.0179 46.3468C32.8886 46.7191 32.6415 46.9937 32.2767 47.1704C31.9118 47.3472 31.5432 47.3709 31.1709 47.2416L29.0891 46.5185C28.7167 46.3892 28.4422 46.1421 28.2655 45.7773C28.0887 45.4124 28.065 45.0438 28.1943 44.6715L36.5531 20.6042L23.3242 33.1364C22.8653 33.584 22.4196 33.8844 21.987 34.0376C21.5883 34.2026 21.152 34.2028 20.6781 34.0382L18.7487 33.3681C18.2748 33.2035 17.9156 32.927 17.6712 32.5387C17.4606 32.1621 17.3139 31.6559 17.2312 31.0203L14.6184 12.9861L6.25957 37.0534C6.13025 37.4257 5.88317 37.7003 5.51832 37.877C5.15347 38.0537 4.78487 38.0775 4.41252 37.9481L2.33075 37.2251C1.9584 37.0958 1.68385 36.8487 1.50711 36.4839C1.33036 36.119 1.30664 35.7504 1.43596 35.3781L12.8279 2.57752C12.9572 2.20517 13.2043 1.93062 13.5691 1.75387C13.934 1.57712 14.3026 1.55341 14.6749 1.68273L16.6044 2.35284C17.5522 2.68202 18.1088 3.48226 18.2742 4.75356L21.6356 28.1687L38.7872 11.8779ZM62.205 39.3L62.4342 38.64C63.0103 36.9813 62.8926 35.518 62.0812 34.2499C61.3155 32.9598 60.0525 32.009 58.2923 31.3977C56.9383 30.9274 55.7897 30.7941 54.8466 30.9976C53.949 31.179 53.0031 31.6091 52.0087 32.2879C51.7115 32.4882 51.4268 32.5979 51.1546 32.6172C50.8824 32.6364 50.5432 32.5755 50.137 32.4345L48.6137 31.9054C48.2414 31.7761 47.9499 31.5231 47.7393 31.1465C47.5626 30.7817 47.5558 30.4189 47.7189 30.0584C48.1732 29.0781 49.0108 28.25 50.2318 27.574C51.4985 26.876 52.9882 26.464 54.701 26.3381C56.4137 26.2123 58.1164 26.4432 59.8088 27.0311C62.9569 28.1244 65.19 29.8862 66.5081 32.3165C67.86 34.7586 67.9835 37.5706 66.8784 40.7525L61.4998 56.2388C61.3705 56.6111 61.1234 56.8857 60.7586 57.0624C60.3937 57.2392 60.0251 57.2629 59.6528 57.1336L57.7741 56.4811C57.4018 56.3518 57.1272 56.1047 56.9505 55.7398C56.7737 55.375 56.75 55.0064 56.8793 54.634L57.6023 52.5523C56.6375 53.5828 55.1516 54.1478 53.1445 54.2473C51.1374 54.3468 49.2538 54.0909 47.4936 53.4796C45.7672 52.88 44.3329 52.0404 43.1905 50.9609C42.0599 49.8475 41.3103 48.6199 40.9418 47.278C40.6072 45.9479 40.675 44.6059 41.1452 43.2519C42.0269 40.7132 43.6625 39.0621 46.0519 38.2988C48.453 37.5016 51.3157 37.3958 54.6401 37.9814L62.205 39.3ZM60.7942 43.362L54.4677 42.2459C52.1499 41.8202 50.2465 41.785 48.7575 42.1404C47.2803 42.4618 46.3418 43.198 45.9421 44.3489C45.6482 45.1952 45.7729 46.092 46.3163 47.0394C46.8598 47.9868 47.9269 48.7367 49.5179 49.2893C51.9551 50.1357 54.1763 50.1296 56.1816 49.2708C58.1868 48.412 59.5774 46.8655 60.3533 44.6314L60.7942 43.362ZM78.4231 53.6953C77.9176 55.1508 77.8173 56.3678 78.1224 57.3462C78.4613 58.3364 79.4601 59.1195 81.1187 59.6955L83.8098 60.6302C84.1821 60.7595 84.4567 61.0066 84.6334 61.3714C84.8102 61.7363 84.8339 62.1049 84.7046 62.4772L84.1403 64.102C84.0109 64.4744 83.7638 64.7489 83.399 64.9257C83.0341 65.1024 82.6655 65.1261 82.2932 64.9968L79.0944 63.8858C76.2171 62.8865 74.3602 61.4071 73.5234 59.4474C72.6985 57.4539 72.7915 55.0016 73.8026 52.0905L78.3699 38.9398L74.6126 37.6349C74.2402 37.5056 73.9657 37.2585 73.7889 36.8936C73.6122 36.5288 73.5885 36.1602 73.7178 35.7878L74.2821 34.163C74.4114 33.7907 74.6585 33.5161 75.0234 33.3394C75.3882 33.1626 75.7568 33.1389 76.1292 33.2682L79.8865 34.5732L82.7609 26.2969C82.8903 25.9246 83.1373 25.65 83.5022 25.4733C83.867 25.2965 84.2356 25.2728 84.608 25.4021L86.4867 26.0546C86.859 26.1839 87.1336 26.431 87.3103 26.7959C87.4871 27.1607 87.5108 27.5293 87.3815 27.9017L84.507 36.178L90.9554 38.4175C91.3278 38.5469 91.6023 38.7939 91.7791 39.1588C91.9558 39.5236 91.9795 39.8922 91.8502 40.2646L91.2859 41.8894C91.1566 42.2617 90.9095 42.5363 90.5447 42.713C90.1798 42.8898 89.8112 42.9135 89.4389 42.7842L82.9904 40.5446L78.4231 53.6953ZM108.517 43.9477C112.139 45.2056 114.599 47.3499 115.898 50.3806C117.198 53.4113 117.16 56.9069 115.784 60.8673L115.308 62.2382C115.179 62.6106 114.932 62.8851 114.567 63.0619C114.202 63.2386 113.833 63.2624 113.461 63.133L95.9943 57.0667L95.8885 57.3714C95.1803 59.629 95.2459 61.6243 96.0855 63.3574C96.9707 65.0683 98.4457 66.2823 100.511 66.9995C102.203 67.5873 103.583 67.8199 104.649 67.6973C105.75 67.5864 106.814 67.2541 107.841 66.7003C108.205 66.5236 108.507 66.4197 108.745 66.3887C109.018 66.3694 109.34 66.4245 109.712 66.5538L111.236 67.0828C111.642 67.2239 111.933 67.4769 112.11 67.8417C112.287 68.2066 112.294 68.5693 112.13 68.9299C111.678 69.7968 110.841 70.5683 109.62 71.2442C108.444 71.8981 106.926 72.2814 105.067 72.3941C103.252 72.4847 101.228 72.142 98.9939 71.3661C96.8275 70.6137 95.0686 69.4528 93.717 67.8833C92.3772 66.28 91.5052 64.4219 91.1011 62.309C90.7307 60.2079 90.8261 58.0219 91.3872 55.7511C91.6722 54.7121 91.9087 53.9218 92.0968 53.3802C92.2849 52.8386 92.5892 52.0718 93.0096 51.0799C93.9416 49.0517 95.1923 47.3618 96.7617 46.0103C98.3651 44.6705 100.167 43.7978 102.166 43.3922C104.2 42.9984 106.316 43.1835 108.517 43.9477ZM111.743 57.757L111.796 57.6046C112.513 55.5398 112.423 53.6688 111.527 51.9917C110.675 50.2925 109.166 49.0667 107 48.3143C105.037 47.6325 103.144 47.6768 101.321 48.4472C99.5319 49.2294 98.2678 50.6301 97.5285 52.6493L97.4756 52.8017L111.743 57.757ZM109.104 40.4534C108.732 40.324 108.434 40.1447 108.21 39.9152C107.986 39.6858 107.77 39.3261 107.561 38.8362L104.512 32.5425C104.401 32.3145 104.393 32.065 104.487 31.7942C104.675 31.2526 105.04 31.0759 105.582 31.264L106.648 31.6343C106.953 31.7401 107.189 31.8791 107.357 32.0512C107.536 32.1894 107.76 32.4189 108.028 32.7395L110.988 36.6693L115.746 35.42C116.155 35.3344 116.473 35.2931 116.699 35.2959C116.938 35.2649 117.209 35.3023 117.514 35.4081L118.58 35.7785C119.122 35.9666 119.298 36.3314 119.11 36.873C119.016 37.1438 118.855 37.3344 118.627 37.4449L112.334 40.4938C111.866 40.7486 111.473 40.8967 111.155 40.938C110.837 40.9794 110.492 40.9354 110.12 40.806L109.104 40.4534ZM133.649 47.2141C133.52 47.5865 133.273 47.861 132.908 48.0378C132.543 48.2145 132.175 48.2383 131.802 48.1089L128.908 47.1038C128.536 46.9744 128.261 46.7274 128.084 46.3625C127.908 45.9977 127.884 45.6291 128.013 45.2567L129.018 42.3625C129.148 41.9902 129.395 41.7157 129.76 41.5389C130.125 41.3622 130.493 41.3384 130.865 41.4678L133.76 42.4729C134.132 42.6023 134.407 42.8493 134.583 43.2142C134.76 43.579 134.784 43.9476 134.654 44.32L133.649 47.2141ZM126.176 52.1861C126.305 51.8138 126.552 51.5392 126.917 51.3625C127.282 51.1857 127.65 51.162 128.023 51.2913L129.901 51.9438C130.274 52.0731 130.548 52.3202 130.725 52.6851C130.902 53.0499 130.925 53.4185 130.796 53.7909L121.838 79.5845C120.827 82.4956 119.386 84.4607 117.514 85.4798C115.631 86.5328 113.251 86.5597 110.374 85.5604L109.409 85.2253C109.037 85.096 108.762 84.8489 108.585 84.4841C108.409 84.1192 108.385 83.7506 108.514 83.3783L109.079 81.7535C109.208 81.3811 109.455 81.1066 109.82 80.9298C110.185 80.7531 110.553 80.7294 110.926 80.8587L111.383 81.0174C113.041 81.5935 114.294 81.5921 115.139 81.0135C116.019 80.4465 116.712 79.4353 117.217 77.9797L126.176 52.1861ZM168.157 92.542C168.378 92.9981 168.441 93.3615 168.347 93.6323C168.241 93.937 168.029 94.1666 167.709 94.3213C167.436 94.4538 167.147 94.4672 166.842 94.3614L163.694 93.2681C162.983 93.0212 162.462 92.5557 162.131 91.8716L152.523 73.1718L147.973 86.2717C147.844 86.644 147.597 86.9186 147.232 87.0953C146.867 87.2721 146.498 87.2958 146.126 87.1665L144.044 86.4435C143.672 86.3142 143.397 86.0671 143.22 85.7022C143.044 85.3374 143.02 84.9688 143.149 84.5964L154.541 51.7959C154.671 51.4235 154.918 51.149 155.283 50.9722C155.647 50.7955 156.016 50.7718 156.388 50.9011L158.47 51.6241C158.842 51.7534 159.117 52.0005 159.294 52.3654C159.47 52.7302 159.494 53.0988 159.365 53.4711L155.256 65.3017L173.133 57.5703C173.817 57.2389 174.515 57.1966 175.226 57.4435L178.171 58.4663C178.475 58.5721 178.688 58.7788 178.809 59.0863C178.975 59.3716 179.006 59.6667 178.9 59.9713C178.806 60.2421 178.531 60.488 178.075 60.7089L156.574 70.0268L168.157 92.542ZM200.773 88.6777C200.582 89.4459 200.333 90.27 200.028 91.1501C199.746 91.9625 199.441 92.7293 199.115 93.4505C197.611 96.7974 195.451 99.1388 192.636 100.475C189.865 101.789 186.703 101.828 183.149 100.594C179.595 99.3595 177.121 97.3623 175.728 94.6024C174.38 91.8204 174.153 88.6502 175.048 85.0917C175.143 84.7076 175.397 83.9232 175.808 82.7384C176.243 81.486 176.542 80.6795 176.705 80.3189C178.175 76.9602 180.312 74.6299 183.116 73.3278C185.932 71.9918 189.117 71.9411 192.672 73.1755C196.226 74.4099 198.694 76.424 200.075 79.2177C201.469 81.9776 201.701 85.1309 200.773 88.6777ZM196.064 87.3268C196.613 85.0899 196.491 83.0938 195.697 81.3387C194.937 79.5953 193.423 78.3298 191.155 77.5421C188.887 76.7544 186.898 76.8032 185.187 77.6883C183.51 78.5853 182.193 80.0816 181.238 82.1775C181.063 82.5719 180.793 83.2938 180.429 84.3432C180.076 85.3587 179.852 86.0585 179.756 86.4426C179.207 88.6795 179.313 90.6697 180.073 92.413C180.867 94.1682 182.398 95.4396 184.665 96.2273C186.933 97.0149 188.906 96.9603 190.583 96.0634C192.294 95.1782 193.627 93.6877 194.583 91.5919C194.909 90.8707 195.184 90.1885 195.407 89.5454C195.631 88.9022 195.85 88.1627 196.064 87.3268ZM211.806 100.02C211.301 101.476 211.2 102.693 211.506 103.671C211.844 104.662 212.843 105.445 214.502 106.021L217.193 106.955C217.565 107.085 217.84 107.332 218.017 107.697C218.193 108.061 218.217 108.43 218.088 108.802L217.523 110.427C217.394 110.8 217.147 111.074 216.782 111.251C216.417 111.428 216.049 111.451 215.676 111.322L212.478 110.211C209.6 109.212 207.743 107.732 206.907 105.773C206.082 103.779 206.175 101.327 207.186 98.4157L211.753 85.265L207.996 83.9601C207.623 83.8307 207.349 83.5837 207.172 83.2188C206.995 82.854 206.972 82.4854 207.101 82.113L207.665 80.4882C207.795 80.1159 208.042 79.8413 208.407 79.6646C208.771 79.4878 209.14 79.4641 209.512 79.5934L213.27 80.8984L216.144 72.6221C216.273 72.2497 216.52 71.9752 216.885 71.7984C217.25 71.6217 217.619 71.598 217.991 71.7273L219.87 72.3798C220.242 72.5091 220.517 72.7562 220.693 73.121C220.87 73.4859 220.894 73.8545 220.765 74.2268L217.89 82.5031L224.339 84.7427C224.711 84.872 224.985 85.1191 225.162 85.484C225.339 85.8488 225.363 86.2174 225.233 86.5898L224.669 88.2146C224.54 88.5869 224.293 88.8615 223.928 89.0382C223.563 89.215 223.194 89.2387 222.822 89.1094L216.374 86.8698L211.806 100.02ZM244.719 91.8211C245.091 91.9504 245.366 92.1975 245.543 92.5623C245.72 92.9272 245.743 93.2958 245.614 93.6681L245.05 95.2929C244.92 95.6653 244.673 95.9398 244.308 96.1166C243.943 96.2933 243.575 96.317 243.203 96.1877L240.258 95.1649C238.362 94.5065 236.73 94.5088 235.362 95.1716C234.039 95.8123 233.049 97.0804 232.391 98.976L227.241 113.802C227.112 114.175 226.865 114.449 226.5 114.626C226.135 114.803 225.767 114.826 225.394 114.697L223.515 114.045C223.143 113.915 222.869 113.668 222.692 113.303C222.515 112.938 222.491 112.57 222.621 112.198L230.838 88.5365C230.968 88.1641 231.215 87.8896 231.58 87.7128C231.945 87.5361 232.313 87.5124 232.685 87.6417L234.564 88.2942C234.936 88.4235 235.211 88.6706 235.388 89.0354C235.565 89.4003 235.588 89.7689 235.459 90.1412L234.912 91.7152C235.942 90.9349 237.013 90.4723 238.125 90.3276C239.238 90.1829 240.556 90.375 242.079 90.9041L244.719 91.8211ZM270.517 113.697C270.434 114.047 270.262 114.595 270.004 115.34C269.733 116.118 269.523 116.671 269.371 116.998C268.423 119.399 267.107 121.332 265.423 122.796C263.772 124.271 261.914 125.199 259.846 125.582C257.813 125.975 255.747 125.808 253.648 125.079C250.128 123.856 247.904 121.794 246.977 118.893L246.431 120.467C246.301 120.839 246.054 121.114 245.689 121.291C245.324 121.467 244.956 121.491 244.583 121.362L242.705 120.709C242.332 120.58 242.058 120.333 241.881 119.968C241.704 119.603 241.681 119.235 241.81 118.862L253.378 85.5539C253.508 85.1815 253.755 84.907 254.12 84.7302C254.484 84.5535 254.853 84.5298 255.225 84.6591L257.104 85.3116C257.476 85.4409 257.751 85.688 257.928 86.0528C258.104 86.4177 258.128 86.7863 257.999 87.1586L254.102 98.3799C255.187 97.6569 256.485 97.1971 257.995 97.0007C259.55 96.7822 261.275 97.0022 263.171 97.6605C265.303 98.4012 267.045 99.5562 268.397 101.126C269.749 102.695 270.615 104.57 270.995 106.751C271.422 108.909 271.262 111.225 270.517 113.697ZM254.657 120.536C256.857 121.3 258.841 121.212 260.61 120.271C262.39 119.296 263.794 117.602 264.821 115.19C264.973 114.863 265.154 114.395 265.366 113.786C266.365 110.908 266.493 108.411 265.748 106.294C265.05 104.155 263.516 102.674 261.147 101.851C259.014 101.11 257.075 101.177 255.331 102.05C253.586 102.923 252.2 104.51 251.174 106.808C251.023 107.135 250.777 107.789 250.436 108.771C250.083 109.787 249.865 110.469 249.781 110.82C249.186 113.079 249.325 115.081 250.199 116.825C251.106 118.582 252.592 119.819 254.657 120.536ZM293.171 119.517L293.4 118.857C293.976 117.198 293.859 115.735 293.047 114.467C292.281 113.176 291.019 112.226 289.258 111.614C287.904 111.144 286.756 111.011 285.813 111.214C284.915 111.396 283.969 111.826 282.975 112.505C282.678 112.705 282.393 112.815 282.121 112.834C281.848 112.853 281.509 112.792 281.103 112.651L279.58 112.122C279.207 111.993 278.916 111.74 278.705 111.363C278.529 110.998 278.522 110.636 278.685 110.275C279.139 109.295 279.977 108.467 281.198 107.791C282.465 107.093 283.954 106.681 285.667 106.555C287.38 106.429 289.082 106.66 290.775 107.248C293.923 108.341 296.156 110.103 297.474 112.533C298.826 114.975 298.95 117.787 297.844 120.969L292.466 136.455C292.337 136.828 292.089 137.102 291.725 137.279C291.36 137.456 290.991 137.48 290.619 137.35L288.74 136.698C288.368 136.568 288.093 136.321 287.917 135.956C287.74 135.592 287.716 135.223 287.845 134.851L288.568 132.769C287.604 133.799 286.118 134.364 284.111 134.464C282.103 134.563 280.22 134.308 278.46 133.696C276.733 133.097 275.299 132.257 274.157 131.177C273.026 130.064 272.276 128.836 271.908 127.495C271.573 126.165 271.641 124.823 272.111 123.469C272.993 120.93 274.629 119.279 277.018 118.515C279.419 117.718 282.282 117.612 285.606 118.198L293.171 119.517ZM291.76 123.579L285.434 122.462C283.116 122.037 281.213 122.002 279.724 122.357C278.246 122.678 277.308 123.415 276.908 124.566C276.614 125.412 276.739 126.309 277.282 127.256C277.826 128.203 278.893 128.953 280.484 129.506C282.921 130.352 285.142 130.346 287.148 129.487C289.153 128.629 290.543 127.082 291.319 124.848L291.76 123.579Z"
        stroke="#EDEDED"
        stroke-width="1"
        mask="url(#path-1-outside-1_53_28)"
      />
    </svg>
  </div>
</div>

<style>
  .grid__container {
    display: grid;
    grid-template: 1fr / 1fr;

    & > * {
      grid-column-start: 1;
      grid-column-end: 1;
      grid-row-start: 1;
      grid-row-end: 1;
    }
  }

  .resetted_path {
    stroke-dasharray: 0 1;
    stroke-dashoffset: 0;
  }
</style>
